(()=>{{let e="hcaptcha::hook",t="1";async function n(){return new Promise(s=>{chrome.scripting.getRegisteredContentScripts().then(i=>{s(i.map(c=>c.id))})})}let r=chrome.runtime.getManifest(),a=r.content_scripts.filter(s=>s.js.includes("captcha/hcaptcha.js")).map(s=>s.matches),o=r.content_scripts.filter(s=>s.js.includes("eventhook.js")).map(s=>s.matches);n().then(s=>{let i=[];!s.includes(t)&&o.length&&i.push({id:t,matches:o.flat(),js:["eventhook/loader.js"],runAt:"document_start",allFrames:!0,world:"MAIN"}),i.length&&chrome.scripting.registerContentScripts(i)})}var S=chrome;var X="https://api.nopecha.com";var _="https://www.nopecha.com",Re="https://developers.nopecha.com",at="https://nopecha.com/api-reference/",j={doc:{url:Re,automation:{url:`${Re}/guides/extension_advanced/#automation-build`}},ref:{url:at},api:{base:X,recognition:"/v1/recognition",status:"/v1/status"},www:{url:_,annoucement:{url:`${_}/json/announcement.json`},demo:{url:`${_}/captcha`,hcaptcha:{url:`${_}/captcha/hcaptcha`},recaptcha:{url:`${_}/captcha/recaptcha`},funcaptcha:{url:`${_}/captcha/funcaptcha`},awscaptcha:{url:`${_}/captcha/awscaptcha`},textcaptcha:{url:`${_}/captcha/textcaptcha`},turnstile:{url:`${_}/captcha/turnstile`},perimeterx:{url:`${_}/captcha/perimeterx`},geetest:{url:`${_}/captcha/geetest`},lemincaptcha:{url:`${_}/captcha/lemincaptcha`}},manage:{url:`${_}/manage`},pricing:{url:`${_}/pricing`},setup:{url:`${_}/setup`}},discord:{url:`${_}/discord`},github:{url:`${_}/github`,release:{url:`${_}/github/release`}}};var Pe="en",st="en",ke="en";var Ce=["sub_frame","stylesheet","script","image","font","object","xmlhttprequest","ping","csp_report","media","websocket","webtransport","webbundle","other"];{let e=function({id:n,key:r,value:a,replaceOnly:o=!1,regexFilter:s,resourceTypes:i=Ce}){return{id:n,priority:1,action:{type:"redirect",redirect:{transform:{queryTransform:{addOrReplaceParams:[{key:r,value:a,replaceOnly:o}]}}}},condition:{regexFilter:s,resourceTypes:i}}},t=function({id:n,regexSubstitution:r,regexFilter:a,resourceTypes:o=Ce}){return{id:n,priority:1,action:{type:"redirect",redirect:{regexSubstitution:r}},condition:{regexFilter:a,resourceTypes:o}}};S.declarativeNetRequest.updateDynamicRules({addRules:[e({id:1,key:"hl",value:Pe,replaceOnly:!0,regexFilter:"^https?://([^\\.]*\\.)?hcaptcha\\.com",resourceTypes:["sub_frame","script"]}),t({id:2,regexSubstitution:`https://\\1/i18n/${Pe}.json`,regexFilter:"^https?://(([^\\.]*\\.)?hcaptcha\\.com/.*)/i18n/[a-z]{2}(-[A-Z]{2})?\\.json$",resourceTypes:["xmlhttprequest"]}),e({id:3,key:"hl",value:st,replaceOnly:!1,regexFilter:"^https?://[^\\.]*\\.(google\\.com|recaptcha\\.net)/recaptcha",resourceTypes:["sub_frame","script"]}),e({id:4,key:"lang",value:ke,replaceOnly:!0,regexFilter:"^https?://[^\\.]*\\.(funcaptcha\\.com?|arkoselabs\\.c(om|n)|arkose\\.com\\.cn)/fc"}),e({id:5,key:"mkt",value:ke,replaceOnly:!1,regexFilter:"^https?://[^\\.]*\\.(funcaptcha\\.com?|arkoselabs\\.c(om|n)|arkose\\.com\\.cn)",resourceTypes:["sub_frame"]})],removeRuleIds:[1,2,3,4,5]})}var O=new Map;chrome.tabs.onUpdated.addListener((e,t)=>{O.has(e)&&!("url"in t)||O.set(e,new Set)});chrome.tabs.onRemoved.addListener(e=>{O.delete(e)});async function Be([e],t){let n=t.tab?.id;n&&(O.has(n)||O.set(n,new Set),O.get(n).add(e))}async function Ee(){let e=await new Promise(t=>{S.tabs.query({active:!0,currentWindow:!0},([n])=>{t(n)})});return O.has(e.id)?[...O.get(e.id)]:[]}function Ae(e){let t=("4bba7932fc09d4cce09e1aba0037cb66b9c0d39d70f4cb482262ba1f523717a7"+e).split("").map(n=>n.charCodeAt(0));return $e(t)}var Ie=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let n=8;n--;)t=t&1?3988292384^t>>>1:t>>>1;Ie[e]=t}function $e(e){let t=-1;for(let n of e)t=t>>>8^Ie[t&255^n];return(t^-1)>>>0}function De(e,t){return t.tab.url}function le(){return new Promise(e=>{S.tabs.query({active:!0,currentWindow:!0},([t])=>e(t))})}async function G(){return(await le()).id}async function Le(){let e=await le();return e&&e.url&&new URL(e.url).href}async function Oe(){let e=await le();return JSON.stringify(e)}function H(e){return new Promise(t=>setTimeout(t,e))}function de(e,t=2166136261){let n=t;for(let r of e)n^=r,n+=n<<1;return n>>>0}var it=30,J=[];function me(e,t){let n;if(!t.method||t.method==="GET"){let a=new URLSearchParams(e.split("?")[1]).get("id");if(!a)return;let o=J.find(s=>{let i=s.postres[s.postres.length-1];return!i?.responseBody||!("data"in i.responseBody)?!1:i?.responseBody?.data===a});o&&(n=o.id,o.getreq={time:+new Date,url:e,options:t})}else for(n=""+[+new Date,performance.now(),Math.random()],J.push({id:n,postreq:{time:+new Date,url:e,options:t},getreq:{time:0,url:"",options:{}},postres:[],getres:[]});J.length>it;)J.shift();return n}function q(e,t){let n=J.find(r=>r.id===e);n&&(n.getreq.time?(n.getres.push({time:+new Date,...t}),t.responseBody&&"data"in t.responseBody&&(n.answer=t.responseBody.data)):n.postres.push({time:+new Date,...t}))}function Fe(){return JSON.stringify(J)}var U={version:18,key:"",keys:[],enabled:!0,disabled_hosts:[],base_api:"",awscaptcha_auto_open:!1,awscaptcha_auto_solve:!1,awscaptcha_solve_delay_time:1e3,awscaptcha_solve_delay:!0,geetest_auto_open:!1,geetest_auto_solve:!1,geetest_solve_delay_time:1e3,geetest_solve_delay:!0,funcaptcha_auto_open:!0,funcaptcha_auto_solve:!0,funcaptcha_solve_delay_time:1e3,funcaptcha_solve_delay:!0,hcaptcha_auto_open:!0,hcaptcha_auto_solve:!0,hcaptcha_solve_delay_time:3e3,hcaptcha_solve_delay:!0,lemincaptcha_auto_open:!1,lemincaptcha_auto_solve:!1,lemincaptcha_solve_delay_time:1e3,lemincaptcha_solve_delay:!0,perimeterx_auto_solve:!1,perimeterx_solve_delay_time:1e3,perimeterx_solve_delay:!0,recaptcha_auto_open:!0,recaptcha_auto_solve:!0,recaptcha_solve_delay_time:2e3,recaptcha_solve_delay:!0,textcaptcha_auto_solve:!1,textcaptcha_image_selector:"",textcaptcha_input_selector:"",textcaptcha_solve_delay_time:100,textcaptcha_solve_delay:!0,turnstile_auto_solve:!0,turnstile_solve_delay_time:5e3,turnstile_solve_delay:!0};var Z=S.action,ge=!0;function pe(e){if(e===ge)return;ge=e;let t=e?"":"g",n=[new Promise(r=>{Z.setIcon({path:Object.fromEntries([16,32,48,128].map(a=>[a,`/icon/${a}${t}.png`]))},r)})];return ee&&n.push(new Promise(r=>{Z.setBadgeText({text:e?ee:""},r)})),Promise.all(n)}var ee="";function te(e,t){if(e!==ee)return ee=e,Promise.all([new Promise(n=>{if(!ge)return n();Z.setBadgeText({text:e},n)}),new Promise(n=>{Z.setBadgeBackgroundColor({color:t},n)})])}var fe=new Set,be=new Set;S.runtime.onConnect.addListener(e=>{e.name==="stream"?(fe.add(e),e.onDisconnect.addListener(()=>{fe.delete(e)})):e.name==="broadcast"&&(be.add(e),e.onDisconnect.addListener(()=>{be.delete(e)}))});function He(e){fe.forEach(t=>t.postMessage(e))}async function Ue(e){let t=await G();e={data:e,event:"broadcast"},be.forEach(n=>{n.sender?.tab?.id!==void 0&&t===n.sender?.tab?.id&&n.postMessage(e)})}U.base_api=U.base_api||X;var he=new Promise(e=>{S.storage.local.get("settings",t=>{if(!t?.settings)return e(U);let{settings:n}=t;n.version!==U.version&&(n={...U,key:n.key}),n={...U,...n},n.base_api=X,n.base_api=n.base_api||X,n.enabled||pe(!1),e(n)})});function z(){return he}async function Ne(e){let t={...await he,...e};return pe(t.enabled),new Promise(n=>{S.storage.local.set({settings:t},()=>{he=Promise.resolve(t),He({event:"settingsUpdate",settings:e}),n(null)})})}var ut=[15,16,12,10,17];async function je(e){let t=new Headers;t.append("accept","application/json"),t.append("content-type","application/json");let n=typeof e.v=="string"?de(e.v.split("").map(l=>l.charCodeAt(0))):-1;e.key&&e.key!=="undefined"&&t.append("authorization",`Basic ${e.key}`);let r=e.type;if(!r)return{error:-2,message:"Unknown error occured"};let s=`${(await z()).base_api||j.api.base}${j.api.recognition}/${r}`,i;for(let l=30;l>0&&n===2385114787;l--){let p=me(s,{method:"POST",headers:t,body:e}),g=await fetch(s,{method:"POST",headers:t,body:JSON.stringify(e)});if(g.status>=500){q(p,{response:g,attempts:l}),await H(1e3);continue}let b=await g.json();if(q(p,{response:g,responseBody:b,attempts:l}),"error"in b){if(ut.includes(b.error))return b;b.error,11,await H(1e3)}else{i=b.data;break}}if(!i)return{error:-1,message:"Server timeout"};t.delete("content-type");let c,u=`${s}?id=${i}&key=${e.key}`;for(let l=60;l>0;l--){c=me(u,{headers:t});let p=await fetch(u,{headers:t});if(p.status>=500){q(c,{response:p,attempts:l}),await H(1e3);continue}let g=await p.json();if(q(c,{response:p,responseBody:g,attempts:l}),"error"in g)g.error,14,await H(1e3);else return g}return c&&q(c,{failed:!0}),{error:-1,message:"Server timeout"}}function Ge(){let e;return t=>e||(e=t().finally(()=>e=void 0),e)}var ct=S.runtime.getManifest().version,ne=null,lt=Ge();function re(){return lt(()=>dt())}async function Je(){return ne===null&&(ne=await re()),ne}async function dt(){let e=new Headers;e.append("accept","application/json");let t=new URLSearchParams;t.append("v",ct);let n=await z(),r=n.key;r&&(t.append("key",r),e.append("authorization",`Basic ${r}`));let o=`${n.base_api||j.api.base}${j.api.status}?${t.toString()}`,s,i=null;try{i=await fetch(o,{method:"GET",headers:e}),s=await i.json()}catch{let u="Unknown error occurred";i?i.status===502?u="Server has routing issues":i.status===522?u="Server not responding":u=`Unknown server error: ${i.status}`:u="Server connection failure",s={error:-1,message:u}}if(i&&!i.ok&&(!s||!("error"in s))&&(s={error:-1,message:`Server error: ${i.status}`}),"error"in s)te("Err","#fde047");else if(typeof s.credit=="number"&&typeof s.quota=="number"){let u=s.credit>=9999?`${Math.floor(s.credit/s.quota*100)}`:s.credit.toString();te(u,s.credit?"#0a95ff":"#fb7185")}else te("","#ffffff00");return ne=s,s}re();async function qe([e,t]){let n=await fetch(e,t);return{headers:Object.fromEntries(n.headers.entries()),status:n.status,ok:n.ok,text:await n.text()}}async function ze([e,t,n=3e4]){let r=new AbortController,a=setTimeout(()=>{try{r.abort("timeout")}catch{}},n);try{let o=await fetch(e,{...t,signal:r.signal}),s=await o.blob(),i=new FileReader;return await new Promise(c=>{i.addEventListener("load",c),i.readAsDataURL(s)}),{headers:Object.fromEntries(o.headers.entries()),status:o.status,ok:o.ok,data:i.result,mime:s.type}}catch(o){throw new Error(`fetch failed: ${o instanceof Error?o.message:String(o)}`)}finally{clearTimeout(a)}}async function Ve(e){!e&&(e=await G(),!e)||chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["lib/selector.js","locate.js"],world:"ISOLATED",injectImmediately:!0})}var oe={left:1,right:2,middle:4,back:8,forward:16,none:0};function We(e,t){return new Promise((n,r)=>{e.push(n),t&&setTimeout(()=>{r(new Error("Signal wait timeout"))},t)})}function mt(e){return e.aborted?Promise.reject(e.reason??new DOMException("Aborted","AbortError")):new Promise((t,n)=>{e.addEventListener("abort",()=>{n(e.reason??new DOMException("Aborted","AbortError"))},{once:!0})})}async function gt(e,t){return e<=0?!0:t?t.aborted?!1:await new Promise(n=>{let r=null,a=()=>{r!==null&&(clearTimeout(r),r=null),t.removeEventListener("abort",o)},o=()=>{a(),n(!1)};t.addEventListener("abort",o),r=setTimeout(()=>{a(),n(!0)},e),t.aborted&&o()}):(await new Promise(n=>setTimeout(n,e)),!0)}var ae=class{constructor(){this.counter=0;this.entries=new Map}begin(t){this.abort(t);let n=new AbortController,r=++this.counter;return this.entries.set(t,{id:r,controller:n}),{key:t,id:r,signal:n.signal}}abort(t){let n=this.entries.get(t);if(!n)return!1;this.entries.delete(t);try{n.controller.abort()}catch{}return!0}abortIfCurrent(t){let n=this.entries.get(t.key);return!n||n.id!==t.id?!1:this.abort(t.key)}end(t){let n=this.entries.get(t.key);n&&n.id===t.id&&this.entries.delete(t.key)}isCurrent(t){let n=this.entries.get(t.key);return!(!n||n.id!==t.id||t.signal.aborted)}async sleep(t,n){return this.isCurrent(n)?await gt(t,n.signal):!1}async run(t,n){let r=this.begin(t);try{return await n(r)}finally{this.end(r)}}async waitSignal(t,n,r){if(!this.isCurrent(r))return"aborted";try{return await Promise.race([We(t,n),mt(r.signal)]),this.isCurrent(r)?"signaled":"aborted"}catch{return this.isCurrent(r)?"timeout":"aborted"}}};function k(){return chrome.debugger!==void 0}async function C(){try{let e=await chrome.tabs.query({active:!0,currentWindow:!0});return e.length===0?null:e[0].id}catch{return null}}var m=new ae;async function Ye(e){return!k()||(e=e??await C(),e===null)?!1:m.abort(e)}var I=new Map,Se=new Map,V=new Set;k()&&(chrome.debugger.onEvent.addListener(async(t,n,r)=>{if(!t.tabId)return;let a=t.tabId,o=t.sessionId??"root";I.has(a)||I.set(a,new Map);let s=I.get(a);if(n==="Target.attachedToTarget"){let{sessionId:i,targetInfo:c}=r;Se.set(c.targetId,i),s.has(i)||s.set(i,[]);try{let u={tabId:a,sessionId:i};await chrome.debugger.sendCommand(u,"DOM.enable"),await chrome.debugger.sendCommand(u,"Runtime.enable")}catch{}}else if(n==="Target.detachedFromTarget")Se.delete(r.targetId),s.delete(r.sessionId);else if(n==="Runtime.executionContextCreated"){let{id:i,auxData:c}=r.context;if(c&&c.isDefault){let u=s.get(o)||[];u.push({contextId:i,frameId:c.frameId}),s.set(o,u)}}else if(n==="Runtime.executionContextDestroyed"){let i=s.get(o);if(i){let c=i.filter(u=>u.contextId!==r.executionContextId);s.set(o,c)}}}),chrome.debugger.onDetach.addListener((t,n)=>{t.tabId&&(V.delete(t.tabId),I.delete(t.tabId))}));async function ue(e){if(!k()||(e=e??await C(),e===null))return!1;try{return await chrome.debugger.attach({tabId:e},"1.3"),V.add(e),I.has(e)||I.set(e,new Map),!0}catch(t){return t.message.includes("already attached")?(V.add(e),!0):!1}}async function Ze(e){if(!k()||(e=e??await C(),e===null))return!1;try{return await chrome.debugger.detach({tabId:e}),V.delete(e),I.delete(e),!0}catch(t){return t.message.includes("not attached")?(V.delete(e),I.delete(e),!0):!1}}async function x(e,t,n={},r){if(!k()||(e=e??await C(),e===null)||!V.has(e)&&!await ue(e))return null;try{let a={tabId:e,sessionId:r};return await chrome.debugger.sendCommand(a,t,n)}catch{return null}}async function F(e){if(!k()||(e=e??await C(),e===null))return!1;await ue(e);let t=I.get(e);return t.has("root")||t.set("root",[]),await x(e,"Page.enable"),await x(e,"DOM.enable"),await x(e,"Runtime.enable"),await x(e,"Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0}),!0}async function et(e,t){let n=await x(e,"Page.getLayoutMetrics",{},t);return n&&n.cssContentSize?{w:n.cssContentSize.width,h:n.cssContentSize.height}:null}async function Me(e,t,n,r,a){let s=0,i=t,c=n,u=r,l=a,p=0,g=0,b=null,w=null,d=null,T=null;for(;s++<50;){let $=await x(e,"Page.getFrameTree",{},c),B=$?xe($.frameTree,i):null;if(B===null)return null;if(!B.parentId){let f=await et(e);return f!==null&&(p=f.w,g=f.h),{x:u,y:l,w:p,h:g,fx:b??0,fy:w??0,fw:d??p,fh:T??g}}let h=B.parentId,y=Se.get(h);y===void 0&&c!==void 0&&xe($.frameTree,h)!==null&&(y=c);try{let f=await x(e,"DOM.getFrameOwner",{frameId:i},y);if(f===null||!f.backendNodeId)throw new Error(`could not get owner for frame ${i}`);let M=0,R=0,P=0,D=0,N=!1;try{let v=await x(e,"DOM.getBoxModel",{backendNodeId:f.backendNodeId},y);v&&v.model&&v.model.content&&(M=v.model.content[0],R=v.model.content[1],P=v.model.width,D=v.model.height,N=!0)}catch{}if(!N)try{let v=await x(e,"DOM.resolveNode",{backendNodeId:f.backendNodeId},y);if(v&&v.object){let E=await x(e,"Runtime.callFunctionOn",{objectId:v.object.objectId,functionDeclaration:`function() {
                                const r = this.getBoundingClientRect();
                                const s = window.getComputedStyle(this);
                                return {
                                    x: r.left + this.clientLeft + (parseFloat(s.paddingLeft) || 0),
                                    y: r.top + this.clientTop + (parseFloat(s.paddingTop) || 0),
                                    w: r.width - (parseFloat(s.paddingLeft) || 0) - (parseFloat(s.paddingRight) || 0),
                                    h: r.height - (parseFloat(s.paddingTop) || 0) - (parseFloat(s.paddingBottom) || 0),
                                };
                            }`,returnByValue:!0},y);E&&E.result&&E.result.value&&(M=E.result.value.x,R=E.result.value.y,P=E.result.value.w,D=E.result.value.h,N=!0)}}catch{}N&&(b=b??M,w=w??R,d=d??P,T=T??D),u+=M,l+=R,i=h,c=y}catch{return null}}return{x:u,y:l,w:p,h:g,fx:b??0,fy:w??0,fw:d??0,fh:T??0}}async function ve(e,t,n=5){let r=I.get(e);if(!r)return null;for(let a=0;a<n;a++){for(let[o,s]of r.entries()){let i=o==="root"?{tabId:e}:{tabId:e,sessionId:o};for(let c=s.length-1;c>=0;c--){let u=s[c];try{let l=await chrome.debugger.sendCommand(i,"Runtime.evaluate",{expression:`document.documentElement.getAttribute('data-frame-token') === '${t}'`,contextId:u.contextId,returnByValue:!0});if(l.result&&l.result.value===!0)return{sessionId:o==="root"?void 0:o,frameId:u.frameId}}catch(l){l.message&&l.message.includes("Cannot find context")&&s.splice(c,1)}}}await H(50)}return null}function xe(e,t){if(e.frame.id===t)return{...e.frame,parentId:e.frame.parentId};if(e.childFrames)for(let n of e.childFrames){let r=xe(n,t);if(r!==null)return r}return null}async function tt(e,t,n){if(!k()||(e=e??await C(),e===null))return null;await F(e),t=t??0;let r=await ve(e,n);if(r===null)return null;let a=await Me(e,r.frameId,r.sessionId,0,0);return a===null?null:{x:a.fx,y:a.fy,w:a.fw,h:a.fh}}function Xe(e,t,n,r,a){let o=1-e;return Math.pow(o,3)*t+3*Math.pow(o,2)*e*n+3*o*Math.pow(e,2)*r+Math.pow(e,3)*a}function pt(e){return 1-Math.pow(1-e,2)}async function Ke(e,t,n=2,r=16){let a=n+(1-Math.sin(Math.PI*t))*(r-n);return await m.sleep(a,e)}var ft=100,bt=2e4,ye=new Map;function se(e,t,n=1){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}var ht=25,_e=new Map;async function yt(e,t,n,r,a,o,s,i,c=250,u=.2){if(!m.isCurrent(e)||n==="mouseReleased")return;let l=_e.get(t)||{positions:[],timeout:null},p=Date.now();if(l.positions=l.positions.filter(b=>p-(b.timestamp||0)<c),!(n==="mouseMoved"&&l.positions.some(b=>se(b,{x:r,y:a},Math.floor(o*u))))){if(l.positions.length>0){let b=l.positions[l.positions.length-1],w=r-b.x,d=a-b.y,T=Math.sqrt(w*w+d*d),$=Math.ceil(T/(o*u));for(let B=1;B<$;B++){if(!m.isCurrent(e))return;let h=B/$,y=Math.round(b.x+w*h),f=Math.round(b.y+d*h);if(l.positions.push({x:y,y:f,timestamp:p}),await Qe(t,n,y,f,o,s,i,c),!m.isCurrent(e))return}}l.positions.push({x:r,y:a,timestamp:p}),l.positions.length>ht&&l.positions.shift(),l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout(()=>{_e.delete(t)},c+100),_e.set(t,l),m.isCurrent(e)&&await Qe(t,n,r,a,o,s,i,c)}}async function Qe(e,t,n,r,a,o,s,i=1200){let u=`(() => {
        return window.requestAnimationFrame(() => {
            const dot = document.createElement('div')
            document.documentElement.append(dot)
            dot.style.cssText = '${`
        position: fixed !important;
        opacity: 1.0 !important;
        width: ${a}px !important;
        height: ${a}px !important;
        top: ${r}px !important;
        left: ${n}px !important;
        transform: translate(-50%, -50%) !important;
        background-color: ${o} !important;
        border: ${s}px solid white !important;
        border-radius: 50% !important;
        z-index: 2147483647 !important;
        pointer-events: none !important;
        transition: opacity ${i}ms ease-in !important;
        will-change: opacity !important;
    `.replace(/\n/g," ")}'

            window.requestAnimationFrame(() => {
                try {
                    dot.style.opacity = '0'
                } catch (e) {}
            })

            setTimeout(() => {
                try {
                    dot.remove()
                } catch (e) {}
            }, ${i} + 100)
        })
    })()`;await x(e,"Runtime.evaluate",{expression:u,includeCommandLineAPI:!1,returnByValue:!1})}async function nt(e,t,n){if(!k()||(e=e??await C(),e===null)||!await F(e))return!1;t=t??0;let a=await ve(e,n);return!(a===null||await Me(e,a.frameId,a.sessionId,0,0)===null)}async function ie(e,t,n,r,a,o,s,i,c,u){if(!k()||(e=e??await C(),e===null))return!1;let l=!!u;u=u??m.begin(e);try{if(await F(e),!m.isCurrent(u))return!1;t=t??0;let p=await ve(e,n);if(p===null||!m.isCurrent(u))return!1;let g=await Me(e,p.frameId,p.sessionId,a,o);if(g===null)return!1;let{x:b,y:w,w:d,h:T}=g;return m.isCurrent(u)?await K(e,r,b,w,d,T,s,i,c,u):!1}finally{l||m.end(u)}}async function K(e,t,n,r,a,o,s,i,c,u){if(!k()||(e=e??await C(),e===null))return!1;let l=!!u;u=u??m.begin(e);try{if(await F(e),!m.isCurrent(u))return!1;if(a===void 0&&o===void 0){let h=await et(e);h!==null&&(a=h.w,o=h.h)}if(a=a??0,o=o??0,!m.isCurrent(u))return!1;let p=ye.get(e)||{positions:[],timeout:null};clearTimeout(p.timeout),p.timeout=setTimeout(()=>ye.delete(e),bt);let g=[...p.positions];for(let h=g.length;h<2;h++)g.push({x:n+(Math.random()-.5)*a,y:r+(Math.random()-.5)*o});let b=g.slice().reverse(),w={x:n,y:r},d=b.find(h=>!se(h,w))||null,T=b.find(h=>!se(h,w)&&!se(h,d))||null,$=50,B=8;if(d&&(d.x!==n||d.y!==r)){if(!m.isCurrent(u))return!1;if(c==="linear"){let h=Math.hypot(n-d.x,r-d.y),y=Math.min($,Math.ceil(h/B));for(let f=1;f<=y;f++){if(!m.isCurrent(u))return!1;let M=f/y,R={x:Math.floor(f===y?0:(Math.random()-.5)*1.2),y:Math.floor(f===y?0:(Math.random()-.5)*1.2)},P={x:d.x+(n-d.x)*M+R.x,y:d.y+(r-d.y)*M+R.y};if(await we(e,"mouseMoved",P.x,P.y,s,0,u),!await Ke(u,M))return!1;new Set([y+3,Math.ceil(y*.25),Math.ceil(y*.5),Math.ceil(y*.75),y-3]).has(f)&&g.push(P)}}else{let h=w.x-d.x,y=w.y-d.y,f=Math.hypot(h,y),M=d,R={x:0,y:0},P={x:0,y:0},D=w;if(T){let A=Math.hypot(d.x-T.x,d.y-T.y);if(A>1){let Q=(d.x-T.x)/A,Y=(d.y-T.y)/A,W=f*.5;R.x=d.x+Q*W,R.y=d.y+Y*W}}else R.x=M.x+(D.x-M.x)*.2+(Math.random()-.5)*50,R.y=M.y+(D.y-M.y)*.2+(Math.random()-.5)*50;let N=-y,v=h,E=Math.random()>.5?1:-1,Te=f*(.2+Math.random()*.3);P.x=n-h*.4+N/f*Te*E,P.y=r-y*.4+v/f*Te*E;let L=Math.min($,Math.ceil(f*1.2/B));for(let A=1;A<=L;A++){if(!m.isCurrent(u))return!1;let Q={x:Math.floor(A===L?0:(Math.random()-.5)*1.2),y:Math.floor(A===L?0:(Math.random()-.5)*1.2)},Y=A/L,W=pt(Y),ce={x:Xe(W,M.x,R.x,P.x,D.x)+Q.x,y:Xe(W,M.y,R.y,P.y,D.y)+Q.y};if(await we(e,"mouseMoved",ce.x,ce.y,s,0,u),!await Ke(u,Y))return!1;new Set([L+3,Math.ceil(L*.25),Math.ceil(L*.5),Math.ceil(L*.75),L-3]).has(A)&&g.push(ce)}}}return m.isCurrent(u)?(g.push(w),ye.set(e,{positions:g.slice(-ft),timeout:p.timeout}),await we(e,t,n,r,s,i,u)):!1}finally{l||m.end(u)}}async function we(e,t,n,r,a,o,s){let i=!!s;s=s??m.begin(e);try{if(await yt(s,e,t,n,r,t==="mouseMoved"?32:96,t==="mouseMoved"?"rgba(10, 149, 255, 0.4)":"rgba(10, 149, 255, 0.8)",t==="mouseMoved"?0:3,t==="mouseMoved"?1e3:500),!m.isCurrent(s))return!1;a=a??"left",o=o??1,t==="mouseMoved"&&(o=0);let g={type:t,x:n,y:r,button:a,buttons:oe[a]??0,clickCount:o};return await x(e,"Input.dispatchMouseEvent",g)!==null}finally{i||m.end(s)}}async function rt(e,t,n,r,a,o,s,i){if(!k()||(e=e??await C(),e===null))return!1;let c=!!i;i=i??m.begin(e);let u=!1,l=!1;try{return await F(e),!m.isCurrent(i)||(o=o??"left",s=s??30,u=await ie(e,t,n,"mousePressed",r,a,o,void 0,void 0,i),!await m.sleep(s,i))?!1:(l=await ie(e,t,n,"mouseReleased",r,a,o,void 0,void 0,i),u&&l)}finally{if(u&&!l)try{await x(e,"Input.dispatchMouseEvent",{type:"mouseReleased",x:r,y:a,button:o,buttons:oe[o]??0,clickCount:1})}catch{}c||m.end(i)}}async function ot(e,t,n,r,a,o){if(!k()||(e=e??await C(),e===null))return!1;let s=!!o;o=o??m.begin(e);let i=!1,c=!1;try{return await F(e),!m.isCurrent(o)||(r=r??"left",a=a??30,i=await K(e,"mousePressed",t,n,void 0,void 0,r,void 0,void 0,o),!await m.sleep(a,o))?!1:(c=await K(e,"mouseReleased",t,n,void 0,void 0,r,void 0,void 0,o),i&&c)}finally{if(i&&!c)try{await x(e,"Input.dispatchMouseEvent",{type:"mouseReleased",x:t,y:n,button:r,buttons:oe[r]??0,clickCount:1})}catch{}s||m.end(o)}}var _t={"echo::sender":(e,t)=>t,"log::getLogs":Fe,"settings::get":z,"settings::update":([e])=>Ne(e),"api::fetchStatus":re,"api::getCachedStatus":Je,"api::recognition":([e])=>je(e),"tab::getCurrentId":G,"tab::getCurrentJSON":Oe,"tab::getCurrentURL":Le,"tab::getURL":De,"tab::registerDetectedCaptcha":Be,"tab::getDetectedCaptchas":Ee,"tab::broadcast":([e])=>Ue(e),"fetch::universalFetch":qe,"fetch::asData":ze,"locator::inject":(e,t)=>Ve(t?.tab?.id),"debugger::abortRunningSequence":(e,t)=>Ye(t?.tab?.id),"debugger::attach":(e,t)=>ue(t?.tab?.id),"debugger::enable":(e,t)=>F(t?.tab?.id),"debugger::detach":(e,t)=>Ze(t?.tab?.id),"debugger::command":([e,t],n)=>x(n?.tab?.id,e,t),"debugger::mouseCapable":([e],t)=>nt(t?.tab?.id,t?.frameId,e),"debugger::mouse":([e,t,n,r,a,o,s],i)=>ie(i?.tab?.id,i?.frameId,e,t,n,r,a,o,s),"debugger::mouseAbs":([e,t,n,r,a,o],s)=>K(s?.tab?.id,e,t,n,void 0,void 0,r,a,o),"debugger::click":([e,t,n,r,a],o)=>rt(o?.tab?.id,o?.frameId,e,t,n,r,a),"debugger::clickAbs":([e,t,n,r],a)=>ot(a?.tab?.id,e,t,n,r),"debugger::locateFrame":([e],t)=>tt(t?.tab?.id,t?.frameId,e)};S.runtime.onMessage.addListener((e,t,n)=>{let r=Ae(e[0]),a=e[1],o=e.slice(2),s=_t[a];return s?(Promise.resolve(s(o,t)).then(i=>{n([r,i])}).catch(i=>{n([r,""+i])}),!0):(n([r,null]),!0)});})();
