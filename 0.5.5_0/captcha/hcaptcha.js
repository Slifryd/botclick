(()=>{var Ze=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var h=(t,e,n)=>(Ze(t,e,"read from private field"),n?n.call(t):e.get(t)),y=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var p=(t,e,n)=>(Ze(t,e,"access private method"),n);var U=chrome;var qt="https://api.nopecha.com";var M="https://www.nopecha.com",et="https://developers.nopecha.com",Ft="https://nopecha.com/api-reference/",Sn={doc:{url:et,automation:{url:`${et}/guides/extension_advanced/#automation-build`}},ref:{url:Ft},api:{base:qt,recognition:"/v1/recognition",status:"/v1/status"},www:{url:M,annoucement:{url:`${M}/json/announcement.json`},demo:{url:`${M}/captcha`,hcaptcha:{url:`${M}/captcha/hcaptcha`},recaptcha:{url:`${M}/captcha/recaptcha`},funcaptcha:{url:`${M}/captcha/funcaptcha`},awscaptcha:{url:`${M}/captcha/awscaptcha`},textcaptcha:{url:`${M}/captcha/textcaptcha`},turnstile:{url:`${M}/captcha/turnstile`},perimeterx:{url:`${M}/captcha/perimeterx`},geetest:{url:`${M}/captcha/geetest`},lemincaptcha:{url:`${M}/captcha/lemincaptcha`}},manage:{url:`${M}/manage`},pricing:{url:`${M}/pricing`},setup:{url:`${M}/setup`}},discord:{url:`${M}/discord`},github:{url:`${M}/github`,release:{url:`${M}/github/release`}}};function tt(t){let e=("4bba7932fc09d4cce09e1aba0037cb66b9c0d39d70f4cb482262ba1f523717a7"+t).split("").map(n=>n.charCodeAt(0));return rt(e)}var nt=new Uint32Array(256);for(let t=256;t--;){let e=t;for(let n=8;n--;)e=e&1?3988292384^e>>>1:e>>>1;nt[t]=e}function rt(t){let e=-1;for(let n of t)e=e>>>8^nt[e&255^n];return(e^-1)>>>0}async function S(t,e){let n=""+[+new Date,performance.now(),Math.random()],[r,a]=await new Promise(o=>{U.runtime.sendMessage([n,t,...e],s=>{o(s)})});if(r===tt(n))return a}function ue(){let t;return e=>t||(t=e().finally(()=>t=void 0),t)}var L,Wt=ue();function at(){return Wt(async()=>(L||(L=await S("settings::get",[])),L))}function ot(t){L&&(L={...L,...t},it(L))}function ce(){return L}function C(t){return new Promise(e=>setTimeout(e,t))}var st=[];function $e(t,e){t.timedout=!1,st.push(t);let n,r=setInterval(async()=>{await ut(t,ce())||(clearTimeout(n),clearInterval(r))},400);e&&(n=setTimeout(()=>clearInterval(r),e),t.timedout=!0)}async function ut(t,e){if(t.timedout)return!1;let n=t.condition(e);if(n===t.running())return!1;if(!n&&t.running())return t.quit(),!1;if(n&&!t.running()){for(;!t.ready();)await C(200);return t.start(),!1}}function it(t){st.forEach(e=>ut(e,t))}function ct(){U.runtime.connect({name:"stream"}).onMessage.addListener(e=>{e.event==="settingsUpdate"&&ot(e.settings)})}function De(t){if(document.readyState!=="loading")setTimeout(t,0);else{let e;e=()=>{removeEventListener("DOMContentLoaded",e),t()},addEventListener("DOMContentLoaded",e)}}var Vn=ue();function Gt(){return!0}async function jt(t){t.scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"}),await new Promise(e=>requestAnimationFrame(e))}function dt(){let t=`verify_${Math.random().toString(36).slice(2)}`;return document.documentElement.setAttribute("data-frame-token",t),t}function ft(){document.documentElement.removeAttribute("data-frame-token")}var J=null,lt=null;async function Xt(){if(J!==null)return J;clearTimeout(lt),lt=setTimeout(()=>{J=null},6e4),J=!1,await S("debugger::enable",[]);let t=dt();try{await S("debugger::mouseCapable",[t])===!0&&(J=!0)}catch{}finally{ft()}return J}async function le(t,e,n,r,a,o){await S("debugger::enable",[]);let s=dt();try{if(await S("debugger::mouse",[s,t,e,n,r,a,o])===!0)return!0}catch{}finally{ft()}return!1}async function Le(t,e,n,r,a,o,s){await S("debugger::enable",[]),await jt(t);let i=t.getBoundingClientRect();if(i.width===0||i.height===0)return!1;n=n??null,r=r??null;let u=n!==null?i.left+n:i.left+i.width/2,c=r!==null?i.top+r:i.top+i.height/2,l=4;if(n===null){let d=Math.floor((Math.random()-.5)*.5*Math.max(i.width-l*2,0));u+=d}if(r===null){let d=Math.floor((Math.random()-.5)*.5*Math.max(i.height-l*2,0));c+=d}return await le(e,u,c,a,o,s)}async function Vt(t,e,n,r,a,o){if(["focus","blur","click","pointerdown","pointerup","pointermove","pointerrawupdate","pointerover","pointerenter","mouseenter","mouseover","pointerout","pointerleave","mouseout","mouseleave"].includes(e))return!0;a=a??0;let u=["none","left","middle","right"][a]??"none";return e==="mousedown"?t===null?await le("mousePressed",n,r,u,1,o):await Le(t,"mousePressed",n,r,u,1,o):e==="mouseup"?(u=u==="none"?"left":u,t===null?await le("mouseReleased",n,r,u,1,o):await Le(t,"mouseReleased",n,r,u,1,o)):e==="mousemove"?t===null?await le("mouseMoved",n,r,u,0,o):await Le(t,"mouseMoved",n,r,u,0,o):!1}function zt(t,e,n,r,a){t===null&&(t=document.body),a=a??0,["pointerup","mouseup"].includes(e)&&a!==0&&(a=0);let o=null;if(e==="focus"){let s={bubbles:!1,cancelable:!1,view:window};o=new FocusEvent(e,s)}else if(e==="blur"){let s={bubbles:!1,cancelable:!1,view:window};o=new FocusEvent(e,s)}else if(e==="click"){let s={bubbles:!0,cancelable:!0,view:window,buttons:0,clientX:Math.floor(n),clientY:Math.floor(r),pointerId:1,pointerType:"mouse"};o=new PointerEvent(e,s)}else if(e.startsWith("mouse")){let s={bubbles:!0,cancelable:!0,view:window,buttons:a,clientX:Math.floor(n),clientY:Math.floor(r)};o=new MouseEvent(e,s)}else if(e.startsWith("pointer")){e==="pointerrawupdate"&&(n+=87.857,r+=10.571);let s={bubbles:!0,cancelable:!0,view:window,buttons:a,clientX:n+.2857360839844,clientY:r+.42857360839844,pointerId:1,pointerType:"mouse"};o=new PointerEvent(e,s)}else return!1;try{return t.dispatchEvent(o),!0}catch{return!1}}function Ut(t){let e=typeof t=="string"?document.querySelector(t):t;return e||null}async function O(){return!!(Gt()&&await Xt()===!0)}async function x(t,e,n,r,a,o,s){return s=s??await O(),!!(s&&await Vt(t,e,n,r,a,o)||zt(t,e,n,r,a)===!0)}async function N(t,e,n){e=e??null,n=n??null;let r=e,a=n,o=null;if(t===null){if(e===null||n===null)return!1}else{if(o=Ut(t),o===null)return!1;let u=o.getBoundingClientRect();r=e??u.width/2,a=n??u.height/2;let c=4;if(e===null){let l=Math.floor((Math.random()-.5)*.5*Math.max(u.width-c*2,0));r+=l}if(n===null){let l=Math.floor((Math.random()-.5)*.5*Math.max(u.height-c*2,0));a+=l}}let s=[{name:"pointerrawupdate",buttons:0,delayMs:0},{name:"pointerover",buttons:0,delayMs:0},{name:"pointerenter",buttons:0,delayMs:0},{name:"mouseover",buttons:0,delayMs:0},{name:"mouseenter",buttons:0,delayMs:10},{name:"pointermove",buttons:0,delayMs:0},{name:"mousemove",buttons:0,delayMs:10},{name:"pointerrawupdate",buttons:0,delayMs:0},{name:"pointermove",buttons:0,delayMs:0},{name:"mousemove",buttons:0,delayMs:30},{name:"focus",buttons:0,delayMs:0},{name:"pointerdown",buttons:1,delayMs:0},{name:"mousedown",buttons:1,delayMs:30},{name:"pointerup",buttons:0,delayMs:0},{name:"mouseup",buttons:0,delayMs:0},{name:"click",buttons:0,delayMs:0}],i=[];for(let{name:u,buttons:c,delayMs:l}of s){let d=await x(o,u,r,a,c);i.push(d),l&&await C(l)}return i.every(u=>u)}var Jt=2e3,de,Ne=!1;function pt(){return!!(document.querySelector("div.check")&&document.querySelector("#anchor"))}async function mt(){Ne=!0;let t=null,e=null;for(;t===null&&(t=document.querySelector("#anchor"),t===null);)await C(1e3);for(;e===null&&(e=document.querySelector("div.check"),e===null);)await C(1e3);let n=null,r=()=>{clearTimeout(n),n=window.setTimeout(()=>{let a=document.querySelector("div.pulse"),o=document.querySelector("#checkbox");t?.getAttribute("aria-hidden")==="true"||e?.style?.display==="block"||a?.style?.display==="block"||o?.getAttribute("tabindex")==="-1"||Kt()},Jt)};de=new MutationObserver(r),de.observe(e,{attributes:!0}),de.observe(t,{attributes:!0}),r()}function ht(){de.disconnect(),Ne=!1}function gt(){return Ne}var Oe=!1;async function Kt(){if(!Oe){Oe=!0;try{await C(500),await N("#checkbox")}catch{}finally{Oe=!1}}}function qe(){return[]}function bt(t,e){return new Promise((n,r)=>{t.push(n),e&&setTimeout(()=>{r(new Error("Signal wait timeout"))},e)})}function K(t){t.forEach(e=>e()),t.splice(0)}function Fe(t){return new Promise((e,n)=>{let r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>n(new Error("filereader")),r.readAsDataURL(t)})}var je,Yt,ge,_t,z=class{static blob_to_data_url(e){return new Promise((n,r)=>{let a=new FileReader;a.onload=()=>n(a.result),a.onerror=()=>r(new Error("filereader")),a.readAsDataURL(e)})}static display(...e){return new Promise(async(n,r)=>{let a=[],o=null;for(let i of e)if(o===null&&typeof i=="string"&&/^data:/.test(i))o=i;else if(o===null&&i instanceof Blob)o=await z.blob_to_data_url(i);else if(o===null&&(i instanceof HTMLImageElement||i instanceof HTMLVideoElement))o=i.src;else if(o===null&&i instanceof ImageBitmap){let u=new OffscreenCanvas(i.width,i.height),c=u.getContext("2d");if(!c)return r(new Error("offscreen canvas failed to get 2d context"));c.drawImage(i,0,0);let l=await u.convertToBlob();o=await z.blob_to_data_url(l)}else if(o===null&&i instanceof ImageData){let u=new OffscreenCanvas(i.width,i.height),c=u.getContext("2d");if(!c)return r(new Error("offscreen canvas failed to get 2d context"));c.putImageData(i,0,0);let l=await u.convertToBlob();o=await z.blob_to_data_url(l)}else if(o===null&&i instanceof HTMLCanvasElement)try{o=i.toDataURL()}catch{let c=await new Promise((l,d)=>{i.toBlob(f=>{f?l(f):d(new Error("canvas toBlob failed"))})});o=await z.blob_to_data_url(c)}else if(o===null&&i instanceof OffscreenCanvas){let u=await i.convertToBlob();o=await z.blob_to_data_url(u)}else a.push(i);if(o){let i=o.match(/^data:([^;]+);base64,(.+)$/);if(i){let u=[],c=i[1],l=i[2],d=l.length*3/4-(l.endsWith("==")?2:l.endsWith("=")?1:0);u.push("mime: ".padStart(16)+`${c}
`),u.push("size: ".padStart(16)+`${p(this,ge,_t).call(this,d)}
`);let f=0;await new Promise((v,k)=>{let R=new Image;R.onload=()=>{u.push("dim: ".padStart(16)+`${R.naturalWidth}x${R.naturalHeight}
`),f=R.naturalWidth,v(!0)},R.onerror=H=>{k(new Error("image load failed"))},R.src=o});let g=u.reduce((v,k)=>Math.max(v,k.length),0),w=Math.max(0,Math.floor(f/7)-g+f%7-2);for(let v=0;v<u.length;v++)u[v]=`${" ".repeat(w)}${u[v]}`;let b=u.join(""),E=String.fromCharCode(27);a.unshift(E+"[1;33m"+b+E+"[0m")}}a.length===0&&a.push("(image)");for(let i=a.length-1;i>0;i--)typeof a[i]=="string"&&(a[0]=(a[0]||"")+a[i],a.splice(i,1));let s=new Image;if(s.onload=()=>{n(!0)},s.onerror=i=>{r(new Error("image load failed"))},!o)return r(new Error("no image data provided"));s.src=o})}},fe=z;je=new WeakSet,Yt=function(e,...n){let r={"font-size":"1px",padding:`${Math.floor(e.height/4)}px ${Math.floor(e.width/2)}px`,"line-height":`${e.height/2}px`,background:`url(${e.src}) no-repeat center`,"background-size":`${e.width}px ${e.height}px`};return[`%c+%c
%s`,Object.keys(r).map(a=>`${a}: ${r[a]}`).join("; "),"",...n]},ge=new WeakSet,_t=function(e){let n=["B","KB","MB","GB","TB"],r=e,a=0;for(;r>=1024&&a<n.length-1;)r/=1024,a++;return`${r.toFixed(2)} ${n[a]}`},y(fe,je),y(fe,ge);var F,be,_e,we,W,ye,wt,ve,Ce,T,B,xe,yt,Ee,vt,A,q,$,V,ee,pe,G,Y,te,me,ae,We,Se,Ct,ne,he,j,Q,oe,Ge,ke,xt,Me,Et,Ie,St,X,Z,I,Re,kt,Te,Mt,Xe=class{static async detect_media(e,{timeout_ms:n=1500,concurrency:r=4,prefer:a=null,candidates:o=null,return_all:s=!1}={}){if(typeof e!="string"||(e=e.trim()).length===0)throw new Error(`url must be a non-empty string, got: ${e}`);if(typeof n!="number"||!Number.isFinite(n)||Math.floor(n)!==n||n<1)throw new Error(`timeout_ms must be a positive integer, got: ${n}`);if(typeof r!="number"||!Number.isFinite(r)||Math.floor(r)!==r||r<1)throw new Error(`concurrency must be a positive integer, got: ${r}`);if(!["image","video",null].includes(a))throw new Error(`prefer must be 'image', 'video', or null, got: ${a}`);let i=Array.isArray(o)?o.filter(Boolean):null;if(i&&!i.length)throw new Error(`candidates must be a non-empty array of strings or null, got: ${o}`);let u=p(this,xe,yt).call(this,e);if(u&&!s)return u;let c=p(this,ee,pe).call(this,e);if(c&&h(this,F)[c]){let g=p(this,X,Z).call(this,e,{ext:c,from:"url"});return s||p(this,A,q).call(this,e,g),g}try{let g=await p(this,oe,Ge).call(this,e,n,null);if(p(this,te,me).call(this,g.status)){let w=g.headers.get("content-type")||"";if(w){let b=p(this,X,Z).call(this,e,{mime:w,from:"head"});return s||p(this,A,q).call(this,e,b),b}}}catch{}let l=p(this,Me,Et).call(this,e,a,i),d=await p(this,Ie,St).call(this,e,l,{timeout_ms:n,concurrency:r,return_all:s});if(d.length){let g=d[0],w=p(this,X,Z).call(this,g.url,{ext:g.ext,mime:g.mime,from:"probe"});if(s){w.all=d.map(b=>({ext:b.ext,url:b.url,mime:b.mime})),p(this,A,q).call(this,e,w);for(let b of d)p(this,A,q).call(this,b.url,p(this,X,Z).call(this,b.url,{ext:b.ext,mime:b.mime,from:"probe"}))}else p(this,A,q).call(this,e,w),p(this,A,q).call(this,g.url,w);return w}let f=p(this,X,Z).call(this,e,{from:"unknown"});return s||p(this,A,q).call(this,e,f),f}static async url_to_data_uri(e,{timeout_ms:n=5e3,max_bytes:r=26214400,allow_canvas_image_fallback:a=!1,prefer:o="video",candidates:s=["webm","mp4"]}={}){if(typeof e!="string"||(e=e.trim()).length===0)return{ok:!1,code:h(this,I).INVALID_INPUT,tried:[]};if(e.startsWith("data:"))return{ok:!0,data_url:e,mime:e.slice(5).split(";")[0]||"",from:"as-is",tried:["as-is"]};let i=p(this,Ee,vt).call(this,e);if(i)return i;if(e.startsWith("blob:"))try{let d=await(await p(this,j,Q).call(this,e,{method:"GET",cache:"no-store"},n)).blob();if(d.size>r)return p(this,$,V).call(this,e,{ok:!1,code:h(this,I).TOO_LARGE,tried:["blob"]});let f=await Fe(d);return p(this,$,V).call(this,e,{ok:!0,data_url:f,mime:d.type||"",from:"blob",tried:["blob"]})}catch{return p(this,$,V).call(this,e,{ok:!1,code:h(this,I).NETWORK,tried:["blob"]})}let u=[],c=null;try{c=await this.detect_media(e,{timeout_ms:Math.max(500,Math.floor(n*.6)),prefer:o,candidates:s}),c.ok&&c.url&&c.url!==e&&(e=c.url,u.push("detect-media"))}catch{}{let l=await p(this,Re,kt).call(this,e,{timeout_ms:n,max_bytes:r});if(u.push("content_fetch"+(l.ok?"":`:${l.code}`)),l.ok){let d=l.mime||c?.mime||"";if(p(this,ae,We).call(this,{mime:d,data_url:l.data_url})){let f=p(this,G,Y).call(this,d)||c?.ext||p(this,ee,pe).call(this,e)||"";return p(this,$,V).call(this,e,{ok:!0,data_url:l.data_url,mime:d,ext:f,from:l.from,tried:u})}}}{let d=await S("fetch::asData",[e,{method:"GET",cache:"no-store",redirect:"follow",credentials:"omit"},n]);if(u.push("background_fetch"),d?.ok){let f=d.mime||c?.mime||"";if(p(this,ae,We).call(this,{mime:f,data_url:d.data})){let g=p(this,G,Y).call(this,f)||c?.ext||p(this,ee,pe).call(this,e)||"";return p(this,$,V).call(this,e,{ok:!0,data_url:d.data,mime:f,ext:g,from:"background_fetch",tried:u})}}}if(a&&(c?.type==="image"||o==="image")){let l=await p(this,Te,Mt).call(this,e,{timeout_ms:n});if(u.push("canvas_image"+(l.ok?"":`:${l.code}`)),l.ok)return p(this,$,V).call(this,e,{ok:!0,data_url:l.data_url,mime:l.mime||"image/png",ext:p(this,G,Y).call(this,l.mime||"image/png")||"png",from:l.from,tried:u})}return{ok:!1,code:h(this,I).EXHAUSTED,tried:u}}},_=Xe;F=new WeakMap,be=new WeakMap,_e=new WeakMap,we=new WeakMap,W=new WeakMap,ye=new WeakSet,wt=function(e){try{return new URL(e,typeof window<"u"?window.location.href:"http://localhost").origin}catch{return""}},ve=new WeakMap,Ce=new WeakMap,T=new WeakMap,B=new WeakMap,xe=new WeakSet,yt=function(e){let n=h(this,T).get(e);return n?(h(this,T).delete(e),h(this,T).set(e,n),n):null},Ee=new WeakSet,vt=function(e){let n=h(this,B).get(e);return n?(h(this,B).delete(e),h(this,B).set(e,n),n):null},A=new WeakSet,q=function(e,n){return h(this,T).has(e)&&h(this,T).delete(e),h(this,T).set(e,n),h(this,T).size>h(this,ve)&&h(this,T).delete(h(this,T).keys().next().value),n},$=new WeakSet,V=function(e,n){return h(this,B).has(e)&&h(this,B).delete(e),h(this,B).set(e,n),h(this,B).size>h(this,Ce)&&h(this,B).delete(h(this,B).keys().next().value),n},ee=new WeakSet,pe=function(e){let n=e.match(/\.([a-z0-9]+)(?:[\?#]|$)/i);return n?n[1].toLowerCase():""},G=new WeakSet,Y=function(e){if(!e)return"";let n=h(this,be).get(e);if(n)return n;if(e.startsWith("image/")){if(e.includes("webp"))return"webp";if(e.includes("avif"))return"avif";if(e.includes("svg"))return"svg";if(e.includes("png"))return"png";if(/jpe?g/.test(e))return"jpg";if(e.includes("gif"))return"gif";if(e.includes("tiff"))return"tiff"}else if(e.startsWith("video/")){if(e.includes("webm"))return"webm";if(e.includes("mp4"))return"mp4";if(e.includes("ogg"))return"ogv";if(e.includes("mpeg"))return"mpeg";if(e.includes("3gpp2"))return"3g2";if(e.includes("3gpp"))return"3gp";if(e.includes("mp2t"))return"ts";if(e.includes("x-msvideo"))return"avi"}else if(e.startsWith("audio/")){if(e.includes("mpeg"))return"mp3";if(e.includes("ogg"))return"oga";if(e.includes("aac"))return"aac";if(e.includes("wav"))return"wav";if(e.includes("webm"))return"weba"}else if(e==="application/pdf")return"pdf";return""},te=new WeakSet,me=function(e){return e>=200&&e<300},ae=new WeakSet,We=function({mime:e=null,data_url:n=null}={}){if(e&&(e.startsWith("image/")||e.startsWith("video/")||e.startsWith("audio/")))return!0;if(n){let r=n.match(/^data:([^;]+);/);if(r){let a=r[1];return a.startsWith("image/")||a.startsWith("video/")||a.startsWith("audio/")}}return!1},Se=new WeakSet,Ct=function(e,n){if(!n)return!1;let r=p(this,G,Y).call(this,n);if(!e)return!!r;if(r)return r===e;let a=h(this,F)[e];return a?n.startsWith(a.type+"/"):!0},ne=new WeakSet,he=function(e,n){if(!e)return;if(e.aborted){try{n.abort(e.reason||"upstream")}catch{}return}let r=()=>{try{n.abort(e.reason||"upstream")}catch{}e.removeEventListener("abort",r)};e.addEventListener("abort",r)},j=new WeakSet,Q=async function(e,n,r){let a=null,o=n&&n.signal?n.signal:null;if(typeof AbortSignal<"u"&&AbortSignal.timeout){let s=AbortSignal.timeout(r);return o?(a=new AbortController,p(this,ne,he).call(this,o,a),p(this,ne,he).call(this,s,a),o=a.signal):o=s,await fetch(e,{...n,signal:o})}else{a=new AbortController,p(this,ne,he).call(this,n&&n.signal,a);let s=setTimeout(()=>{try{a.abort("timeout")}catch{}},r);try{let i=await fetch(e,{...n,signal:a.signal});return clearTimeout(s),i}catch(i){throw clearTimeout(s),i}}},oe=new WeakSet,Ge=async function(e,n,r){let a=p(this,ye,wt).call(this,e),o=h(this,W).get(a)||{block_head:!1,cors_opaque:!1},s={redirect:"follow",cache:"no-store"};if(o.block_head)try{let i=await p(this,j,Q).call(this,e,{...s,method:"GET",headers:{range:"bytes=0-0"},signal:r},Math.max(400,Math.floor(n*.9)));return typeof Response<"u"&&i.type==="opaque"&&h(this,W).set(a,{...o,cors_opaque:!0}),i}catch{throw new Error("range-failed")}try{let i=await p(this,j,Q).call(this,e,{...s,method:"HEAD",signal:r},n);return typeof Response<"u"&&i.type==="opaque"&&h(this,W).set(a,{...o,cors_opaque:!0}),i}catch{h(this,W).set(a,{...o,block_head:!0});try{let u=await p(this,j,Q).call(this,e,{...s,method:"GET",headers:{range:"bytes=0-0"},signal:r},Math.max(400,Math.floor(n*.9)));return typeof Response<"u"&&u.type==="opaque"&&h(this,W).set(a,{...o,cors_opaque:!0}),u}catch{throw new Error("range-failed")}}},ke=new WeakSet,xt=function(e,n){let r=new URL(e,typeof window<"u"?window.location.href:"http://localhost"),a=r.pathname.split("/"),o=a[a.length-1],s=o.match(/^([^\.]+)(\.[^\/\.]+)?$/);if(s){let i=s[1],u=s[2]?s[2].slice(1).toLowerCase():"";u&&h(this,F)[u]?a[a.length-1]=i+"."+n:a[a.length-1]=o+(o.endsWith(".")?"":".")+n}else a[a.length-1]=(o||"index")+"."+n;return r.pathname=a.join("/"),r.toString()},Me=new WeakSet,Et=function(e,n,r){if(r&&r.length)return r.slice();let a=h(this,_e);if(n==="image")return a.slice();let o=h(this,we);return n==="video"?o.slice():e.includes("/tip/")||e.includes("hcaptcha")?["webm","mp4"]:[...a,...o]},Ie=new WeakSet,St=async function(e,n,{timeout_ms:r,concurrency:a,return_all:o}){let s=[],i=0,u=0,c=Number.POSITIVE_INFINITY,l=!1,d=null,f=()=>{o||l||Number.isFinite(c)&&(l=!0,d(!0))},g=async b=>{u+=1;let E=n[b],v=p(this,ke,xt).call(this,e,E);try{let k=await p(this,oe,Ge).call(this,v,r,null);if(typeof Response<"u"&&k&&k.type==="opaque")return;if(k&&p(this,te,me).call(this,k.status)){let R=k.headers.get("content-type")||"";p(this,Se,Ct).call(this,E,R)&&(s.push({index:b,url:v,ext:E,mime:R}),!o&&b<c&&(c=b,f()))}}catch{}u-=1},w=async()=>{for(;i<n.length&&u<a;)g(i),i+=1;return o?u===0&&i>=n.length?!0:(await new Promise(b=>setTimeout(b,0)),await w()):Number.isFinite(c)||u===0&&i>=n.length?!0:(await new Promise(b=>setTimeout(b,0)),await w())};return o?await w():await Promise.race([new Promise(b=>{d=b}),w()]),s.sort((b,E)=>b.index-E.index),s},X=new WeakSet,Z=function(e,{ext:n="",mime:r="",from:a="unknown"}={}){let o=n||p(this,G,Y).call(this,r)||"",s=o?h(this,F)[o]:null;return{ok:!!(o||r),url:e,ext:o,mime:r||(s?s.mime:""),type:s?s.type:r?r.split("/")[0]:"",kind:s?s.kind:"",from:a,all:void 0}},I=new WeakMap,Re=new WeakSet,kt=async function(e,{timeout_ms:n,max_bytes:r}){try{let a=await p(this,j,Q).call(this,e,{method:"GET",cache:"no-store",redirect:"follow",credentials:"omit"},n);if(typeof Response<"u"&&a.type==="opaque")return{ok:!1,code:h(this,I).OPAQUE};if(!p(this,te,me).call(this,a.status))return{ok:!1,code:h(this,I).NETWORK,status:a.status};let o=a.headers.get("content-length");if(o&&Number.isFinite(+o)&&+o>r)return{ok:!1,code:h(this,I).TOO_LARGE,size:+o};let s=await a.blob();if(s.size>r)return{ok:!1,code:h(this,I).TOO_LARGE,size:s.size};let i=await Fe(s),u=s.type||"";return{ok:!0,data_url:i,mime:u,from:"content_fetch"}}catch(a){return a&&(a.name==="TimeoutError"||a==="timeout")||(a?.message||"").includes("timeout")?{ok:!1,code:h(this,I).TIMEOUT}:{ok:!1,code:h(this,I).NETWORK}}},Te=new WeakSet,Mt=async function(e,{timeout_ms:n,target_mime:r="image/png",quality:a=.92}){let o=new Image;o.crossOrigin="anonymous";let s=setTimeout(()=>{try{o.src=""}catch{}},n);try{await new Promise((f,g)=>{o.onload=()=>f(!0),o.onerror=()=>g(new Error("img-error")),o.src=e}),clearTimeout(s);let i=Math.max(1,o.naturalWidth||o.width||1),u=Math.max(1,o.naturalHeight||o.height||1),c=typeof OffscreenCanvas<"u"?new OffscreenCanvas(i,u):(()=>{let f=document.createElement("canvas");return f.width=i,f.height=u,f})(),l=c.getContext("2d",{alpha:!0});if(!l)return{ok:!1,code:h(this,I).UNSUPPORTED};l.drawImage(o,0,0,i,u);let d;try{d=c.convertToBlob?await(async()=>{let f=await c.convertToBlob({type:r,quality:a});return await Fe(f)})():c.toDataURL(r,a)}catch{return{ok:!1,code:h(this,I).CORS_TAINTED}}return{ok:!0,data_url:d,mime:r,from:"canvas_image"}}catch(i){return clearTimeout(s),i&&(i.name==="TimeoutError"||i==="timeout")?{ok:!1,code:h(this,I).TIMEOUT}:{ok:!1,code:h(this,I).NETWORK}}},y(_,ye),y(_,xe),y(_,Ee),y(_,A),y(_,$),y(_,ee),y(_,G),y(_,te),y(_,ae),y(_,Se),y(_,ne),y(_,j),y(_,oe),y(_,ke),y(_,Me),y(_,Ie),y(_,X),y(_,Re),y(_,Te),y(_,F,{apng:{type:"image",mime:"image/apng",kind:"Animated Portable Network Graphics (APNG) image"},avif:{type:"image",mime:"image/avif",kind:"AVIF image"},bmp:{type:"image",mime:"image/bmp",kind:"Windows OS/2 Bitmap Graphics"},gif:{type:"image",mime:"image/gif",kind:"Graphics Interchange Format (GIF)"},ico:{type:"image",mime:"image/vnd.microsoft.icon",kind:"Icon format"},jpeg:{type:"image",mime:"image/jpeg",kind:"JPEG images"},jpg:{type:"image",mime:"image/jpeg",kind:"JPEG images"},png:{type:"image",mime:"image/png",kind:"Portable Network Graphics"},svg:{type:"image",mime:"image/svg+xml",kind:"Scalable Vector Graphics (SVG)"},tif:{type:"image",mime:"image/tiff",kind:"Tagged Image File Format (TIFF)"},tiff:{type:"image",mime:"image/tiff",kind:"Tagged Image File Format (TIFF)"},webp:{type:"image",mime:"image/webp",kind:"WEBP image"},"3g2":{type:"video",mime:"video/3gpp2",kind:"3GPP2 audio/video container"},"3gp":{type:"video",mime:"video/3gpp",kind:"3GPP audio/video container"},avi:{type:"video",mime:"video/x-msvideo",kind:"AVI: Audio Video Interleave"},mp4:{type:"video",mime:"video/mp4",kind:"MP4 video"},mpeg:{type:"video",mime:"video/mpeg",kind:"MPEG Video"},ogv:{type:"video",mime:"video/ogg",kind:"Ogg video"},ts:{type:"video",mime:"video/mp2t",kind:"MPEG transport stream"},webm:{type:"video",mime:"video/webm",kind:"WEBM video"}}),y(_,be,(()=>{let e=new Map;for(let[n,r]of Object.entries(h(Xe,F)))e.set(r.mime,n);return e})()),y(_,_e,["webp","avif","jpeg","jpg","png","gif","apng","bmp","svg"]),y(_,we,["webm","mp4","ogv","mpeg","3gp","3g2","ts","avi"]),y(_,W,new Map),y(_,ve,512),y(_,Ce,64),y(_,T,new Map),y(_,B,new Map),y(_,I,Object.freeze({INVALID_INPUT:"invalid-input",TIMEOUT:"timeout",TOO_LARGE:"too-large",NETWORK:"network",OPAQUE:"opaque",CORS_TAINTED:"cors-tainted",UNSUPPORTED:"unsupported",EXHAUSTED:"exhausted"}));async function It(t,e){let n={v:U.runtime.getManifest().version,key:Qt(t)};return n.url=await S("tab::getURL",[]),n}function Qt(t){return!t.keys||!t.keys.length?t.key:t.keys[Math.floor(Math.random()*t.keys.length)]}var Ve="4093804980";function Zt(t){return t.aborted?Promise.reject(t.reason??new DOMException("Aborted","AbortError")):new Promise((e,n)=>{t.addEventListener("abort",()=>{n(t.reason??new DOMException("Aborted","AbortError"))},{once:!0})})}async function en(t,e){return t<=0?!0:e?e.aborted?!1:await new Promise(n=>{let r=null,a=()=>{r!==null&&(clearTimeout(r),r=null),e.removeEventListener("abort",o)},o=()=>{a(),n(!1)};e.addEventListener("abort",o),r=setTimeout(()=>{a(),n(!0)},t),e.aborted&&o()}):(await new Promise(n=>setTimeout(n,t)),!0)}var Be=class{constructor(){this.counter=0;this.entries=new Map}begin(e){this.abort(e);let n=new AbortController,r=++this.counter;return this.entries.set(e,{id:r,controller:n}),{key:e,id:r,signal:n.signal}}abort(e){let n=this.entries.get(e);if(!n)return!1;this.entries.delete(e);try{n.controller.abort()}catch{}return!0}abortIfCurrent(e){let n=this.entries.get(e.key);return!n||n.id!==e.id?!1:this.abort(e.key)}end(e){let n=this.entries.get(e.key);n&&n.id===e.id&&this.entries.delete(e.key)}isCurrent(e){let n=this.entries.get(e.key);return!(!n||n.id!==e.id||e.signal.aborted)}async sleep(e,n){return this.isCurrent(n)?await en(e,n.signal):!1}async run(e,n){let r=this.begin(e);try{return await n(r)}finally{this.end(r)}}async waitSignal(e,n,r){if(!this.isCurrent(r))return"aborted";try{return await Promise.race([bt(e,n),Zt(r.signal)]),this.isCurrent(r)?"signaled":"aborted"}catch{return this.isCurrent(r)?"timeout":"aborted"}}};var m=new Be,ie=0;function tn(){m.abort(ie),S("debugger::abortRunningSequence",[])}S("debugger::abortRunningSequence",[]);var nn=/https?:\/\/[^\s"'`<>()]+/gi,re=qe(),Je=qe(),se,P=!1,D=[];window.addEventListener("message",t=>{if(t.source!==window||!t.data||t.data.source!==Ve)return;let e=t.data;sn(e.payload)});function Rt(){let t=document.querySelector(".challenge-container");return!(!t||t.childElementCount===0||!document.querySelector(".display-error")||!document.querySelector("body.no-selection")||!document.querySelector("div.button-submit.button"))}function Tt(){P=!0,K(re),D.splice(0,D.length-1),se&&se.disconnect(),se=new MutationObserver(()=>{K(re)});let t=[[document.querySelector(".challenge-container"),{childList:!0,subtree:!0}],[document.querySelector(".display-error"),{attributes:!0,attributeFilter:["aria-hidden"]}],[document.querySelector("body.no-selection"),{attributes:!0,attributeFilter:["aria-hidden"]}],[document.querySelector("div.button-submit.button"),{attributes:!0,attributeFilter:["style","class"]}]];for(let[e,n]of t)if(e)try{se.observe(e,n)}catch{}an()}function Bt(){se?.disconnect(),P=!1,D.length=0,K(re),K(Je)}function Pt(){return P}async function rn(){document.querySelector("#display-language .text, .display-language .text")?.textContent!=="EN"&&(await N(".language-selector .option:nth-child(23)"),await Pe())}async function Ke(){await N(".button-submit")}async function Pe(){await N(".refresh")}var ze=!1;async function an(){if(ze)return;ze=!0;let t;for(;P;){if(document.querySelector(".display-error[aria-hidden=false]"))for(;P&&document.querySelector(".button-submit[title*=Submit], .button-submit[title*=Verify]");)await C(1e3);if(!document.querySelector(".challenge-container")?.childElementCount){await C(1e3);continue}if(await rn(),t=t??await m.run(ie,async i=>{let u=await ln(i);return m.isCurrent(i)?u:null}),!t){Pe(),await C(3e3);continue}let e=Date.now(),n=await m.run(ie,async i=>{let u=await dn(i,t);return m.isCurrent(i)?u:null});if(!n){t=void 0,await C(1e3);continue}let r=ce(),a=await It(r),o=await m.run(ie,async i=>{let u=await S("api::recognition",[{...a,type:"hcaptcha",data:n}]);return!m.isCurrent(i)||(!u||"error"in u)&&!await m.sleep(2e3,i)?null:u});if(!o||"error"in o){Pe(),t=void 0,await C(3e3);continue}if(!await m.run(ie,async i=>await pn(i,r,e,n,o))){Pe(),t=void 0,await C(3e3);continue}await C(1e3),t=void 0}ze=!1}var on=1,At=15e3,Ae=new Map;function sn(t){if(!t||typeof t.body!="string")return;let e;try{e=JSON.parse(t.body)}catch{return}if(!e||typeof e!="object"||!un(e.request_type))return;let n=e.key||e.request_id||e.req;if(n){let r=Ae.get(n);if(r&&Date.now()-r<At)return;Ae.set(n,Date.now()),cn()}for(D.push({raw:e,receivedAt:Date.now()});D.length>on;)D.shift();tn(),K(Je)}function un(t){return t==="image_label_binary"||t==="image_label_area_select"||t==="image_drag_drop"}function cn(){for(let[t,e]of Ae.entries())Date.now()-e>At&&Ae.delete(t)}async function ln(t){for(;P;){if(D.length){let e=D.pop();if(D.length=0,e)return e}await m.waitSignal(Je,0,t)}}async function dn(t,e){if(e.prepared)return e.prepared;if(m.isCurrent(t)){if(!e.preparing){let n=JSON.parse(JSON.stringify(e.raw));e.preparing=fn(t,n).then(r=>(r._timestamp=Date.now(),e.prepared=r,r))}return await e.preparing}}async function fn(t,e){return await Ue(t,e),e}async function Ue(t,e){if(!m.isCurrent(t))return e;if(typeof e=="string"){if(e.startsWith("data:"))return e;let n=e.match(nn);if(!n)return e;let r=e;for(let a of n){if(!m.isCurrent(t))return r;let o=a;try{let s=await _.url_to_data_uri(a);s.ok&&s.data_url&&(o=s.data_url)}catch{}r=r.split(a).join(o)}return r}if(Array.isArray(e)){for(let n=0;n<e.length&&m.isCurrent(t);n++)e[n]=await Ue(t,e[n]);return e}if(e&&typeof e=="object")for(let n of Object.keys(e)){if(!m.isCurrent(t))break;e[n]=await Ue(t,e[n])}return e}async function pn(t,e,n,r,a){if(!m.isCurrent(t))return!1;let o=Array.isArray(a.data)?a.data:[];if(!o.length)return!1;switch(r.request_type){case"image_label_binary":return await mn(t,e,n,r,o);case"image_label_area_select":return await hn(t,e,n,r,o);case"image_drag_drop":return await gn(t,e,n,r,o);default:return!1}}async function mn(t,e,n,r,a){if(!m.isCurrent(t))return!1;let s=(r.tasklist||[]).reduce((i,u,c)=>{let l=Math.floor(c/9);return i[l]||(i[l]=[]),i[l].push(u),i},[]);for(let[i,u]of a.entries()){if(!m.isCurrent(t)||!P||!Array.isArray(u)||u.length!==9||!await Ye(t)||!m.isCurrent(t))return!1;let c=await bn(t);if(!c)return!1;if(e.hcaptcha_solve_delay&&e.hcaptcha_solve_delay_time>0){let f=Date.now()-n,g=e.hcaptcha_solve_delay_time-f;if(g>0&&!await m.sleep(g,t))return!1;n=Date.now()}let d=u.map((f,g)=>g).slice().sort(()=>Math.random()-.5);for(let f of d){let w=c[f].getAttribute("aria-pressed")==="true";if(!!u[f]!==w&&(!m.isCurrent(t)||(await N(`.task:nth-child(${f+1})`),!await O()&&!await m.sleep(100+Math.random()*100,t))))return!1}if(!m.isCurrent(t))return!1;Ke();try{if(await m.waitSignal(re,1e4,t),!await m.sleep(1e3,t))return!1}catch{return!1}}return!0}async function hn(t,e,n,r,a){if(!m.isCurrent(t))return!1;for(let[o,s]of a.entries()){if(!m.isCurrent(t)||!P)return!1;r.tasklist=r.tasklist||[];let i=r.tasklist[o];if(!i)continue;if(!await Ye(t)||!m.isCurrent(t))return!1;let u=await Ht(t);if(!u)return!1;if(e.hcaptcha_solve_delay&&e.hcaptcha_solve_delay_time>0){let d=Date.now()-n,f=e.hcaptcha_solve_delay_time-d;if(f>0&&!await m.sleep(f,t))return!1;n=Date.now()}let c=0;if(i.datapoint_uri.startsWith("data:video/")?c=await yn(i.datapoint_uri):c=await $t(i.datapoint_uri),!m.isCurrent(t))return!1;let l=s.slice().sort(()=>Math.random()-.5);for(let d of l||[]){if(!m.isCurrent(t))return!1;let f=typeof d.x=="number"?d.x:50,g=typeof d.y=="number"?d.y:50;if(await vn(u,f,g,c),!await O()&&!await m.sleep(100+Math.random()*100,t))return!1}if(!m.isCurrent(t))return!1;Ke();try{if(await m.waitSignal(re,1e4,t),!await m.sleep(4e3,t))return!1}catch{return!1}}return!0}async function gn(t,e,n,r,a){if(!m.isCurrent(t))return!1;for(let[o,s]of a.entries()){if(!m.isCurrent(t)||!P)return!1;r.tasklist=r.tasklist||[];let i=r.tasklist[o];if(!i)continue;if(!await Ye(t)||!m.isCurrent(t))return!1;let u=await Ht(t);if(!u||!await m.sleep(500,t)||!m.isCurrent(t))return!1;let c=await $t(i.datapoint_uri);for(let l of s||[]){if(!m.isCurrent(t))return!1;let d=r.tasklist?.flatMap(He=>He.entities||[]).find(He=>He.entity_id===l.entity_id);if(!d)continue;let{w:f,h:g,pl:w,pt:b,mt:E,isMobile:v}=Dt(u,c),k=0;v?k=-7:k=-14;let R=480,H=330,Qe=[d.coords[0]/R*f,d.coords[1]/H*g],Ot=Qe[0]+w,Nt=Qe[1]+b+E+k;if(await Cn(u,Ot,Nt,l.x,l.y,c),!await O()&&!await m.sleep(100+Math.random()*100,t))return!1}if(e.hcaptcha_solve_delay&&e.hcaptcha_solve_delay_time>0){let l=Date.now()-n,d=e.hcaptcha_solve_delay_time-l;if(d>0&&!await m.sleep(d,t))return!1;n=Date.now()}if(!m.isCurrent(t))return!1;Ke();try{if(await m.waitSignal(re,1e4,t),!await m.sleep(1e3,t))return!1}catch{return!1}}return!0}async function Ye(t,e=3e4){let n=Date.now()+e;for(;Date.now()<n&&P;){if(!m.isCurrent(t))return!1;if(document.querySelector(".button-submit.button")?.getAttribute("aria-disabled")==="false")return!0;if(!await m.sleep(100,t))return!1}return!1}async function bn(t,e=1e4){let n=Date.now()+e;for(;Date.now()<n&&P;){if(!m.isCurrent(t))return null;let r=[...document.querySelectorAll(".task-grid .task, .task")].filter(a=>a.querySelector(".task-image, .image"));if(r.length>=9)return r.slice(0,9);if(!await m.sleep(100,t))return null}return null}async function Ht(t,e=1e4){let n=Date.now()+e;for(;Date.now()<n&&P;){if(!m.isCurrent(t))return null;let r=document.querySelector(".challenge-view > canvas");if(r)return r;if(!await m.sleep(100,t))return null}return document.querySelector(".challenge-view > canvas")}async function _n(t){return new Promise((e,n)=>{let r=new Image;r.onload=()=>e(r),r.onerror=a=>n(new Error("image load failed: "+a)),r.src=t})}async function $t(t){try{let e=await _n(t),n=e.naturalWidth||e.width,r=e.naturalHeight||e.height;return n/r}catch{return 0}}async function wn(t){return new Promise(e=>{let n=document.createElement("video");n.preload="metadata",n.onloadedmetadata=()=>{e({ok:!0,width:n.videoWidth,height:n.videoHeight})},n.onerror=()=>{e({ok:!1})},n.src=t})}async function yn(t){try{let e=await wn(t);return e.ok&&e.width&&e.height?e.width/e.height:0}catch{return 0}}function Dt(t,e=0,n=20){let r=t.getBoundingClientRect(),a=r.width/t.width,o=r.width<500,i=t.previousElementSibling?.getBoundingClientRect(),u=0;if(u+=i?.top||10,u<90){let v=i?.bottom||0;v>=100?u+=v:u+=o?100:120}let c=Math.round(u-r.top),l=document.querySelector(".example-image");l&&(c+=Math.round(l.getBoundingClientRect().height));let d=Math.round(n*a),f=Math.round(n*a),g=Math.round(n*a),w=Math.round(n*a);if(e>0)if((r.width-d-f)/e>r.height-c-g-w){let H=(r.height-c-g-w)*e;d=Math.round((r.width-H)/2),f=Math.round((r.width-H)/2)}else{let H=(r.width-d-f)/e;g=Math.round((r.height-c-H)/2),w=Math.round((r.height-c-H)/2)}let b=Math.round(r.width-d-f),E=Math.round(r.height-g-w-c);return{isMobile:o,w:b,h:E,pl:d,pr:f,pt:g,pb:w,mt:c}}function Lt(t,e,n,r=0){let{w:a,h:o,pl:s,pt:i,mt:u}=Dt(t,r),c=5;e=Math.max(c,Math.min(100-c,e)),n=Math.max(c,Math.min(100-c,n));let l=s+e/100*a,d=u+i+n/100*o;return[l,d]}async function vn(t,e,n,r=0){let a=Lt(t,e,n,r);if(!a)return;let[o,s]=a;if(await O()||(o+=10,s+=10),await N(t,o,s),!1)try{}catch(v){}}async function Cn(t,e,n,r,a,o=0){let s=[e,n],i=Lt(t,r,a,o);if(await x(t,"pointerrawupdate",s[0],s[1],0),await x(t,"pointermove",s[0],s[1],0),await x(t,"mousemove",s[0],s[1],0),await C(30+Math.random()*30),await O()&&(await x(t,"focus",s[0],s[1],0),await x(t,"pointerdown",s[0],s[1],1),await x(t,"mousedown",s[0],s[1],1),await C(30+Math.random()*30),await x(t,"pointerup",s[0],s[1],0),await x(t,"mouseup",s[0],s[1],0),await x(t,"click",s[0],s[1],0),await C(30+Math.random()*30)),await x(t,"focus",s[0],s[1],0),await x(t,"pointerdown",s[0],s[1],1),await x(t,"mousedown",s[0],s[1],1),await C(2e3+Math.random()*250),!await O()){let d=Math.hypot(i[0]-s[0],i[1]-s[1]),f=Math.min(50,Math.ceil(d/10)),g=Math.max(1,500/f);for(let w=1;w<=f;w++){let b=w/f,E=s[0]+(i[0]-s[0])*b,v=s[1]+(i[1]-s[1])*b;await x(t,"pointerrawupdate",E,v,1),await x(t,"pointermove",E,v,1),await x(t,"mousemove",E,v,1),await C(g+Math.random()*2)}}if(await x(t,"pointerup",i[0],i[1],0),await x(t,"mouseup",i[0],i[1],0,"linear"),await x(t,"click",i[0],i[1],0),!1)try{}catch(k){}}async function xn(){ct(),await at(),await S("tab::registerDetectedCaptcha",["hcaptcha"]);let t=new URLSearchParams(location.hash.substring(1)),e=t.get("frame"),n=t.get("host");e==="checkbox"?$e({name:"hcaptcha/auto-open",condition:r=>r.enabled&&r.hcaptcha_auto_open&&!r.disabled_hosts.includes(n),ready:pt,start:mt,quit:ht,running:gt}):$e({name:"hcaptcha/auto-solve",condition:r=>r.enabled&&r.hcaptcha_auto_solve&&!r.disabled_hosts.includes(n),ready:Rt,start:Tt,quit:Bt,running:Pt})}De(xn);})();
