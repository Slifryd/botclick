(()=>{var s=chrome;var k="https://api.nopecha.com";var o="https://www.nopecha.com",f="https://developers.nopecha.com",L="https://nopecha.com/api-reference/",N={doc:{url:f,automation:{url:`${f}/guides/extension_advanced/#automation-build`}},ref:{url:L},api:{base:k,recognition:"/v1/recognition",status:"/v1/status"},www:{url:o,annoucement:{url:`${o}/json/announcement.json`},demo:{url:`${o}/captcha`,hcaptcha:{url:`${o}/captcha/hcaptcha`},recaptcha:{url:`${o}/captcha/recaptcha`},funcaptcha:{url:`${o}/captcha/funcaptcha`},awscaptcha:{url:`${o}/captcha/awscaptcha`},textcaptcha:{url:`${o}/captcha/textcaptcha`},turnstile:{url:`${o}/captcha/turnstile`},perimeterx:{url:`${o}/captcha/perimeterx`},geetest:{url:`${o}/captcha/geetest`},lemincaptcha:{url:`${o}/captcha/lemincaptcha`}},manage:{url:`${o}/manage`},pricing:{url:`${o}/pricing`},setup:{url:`${o}/setup`}},discord:{url:`${o}/discord`},github:{url:`${o}/github`,release:{url:`${o}/github/release`}}};function b(e){let t=("4bba7932fc09d4cce09e1aba0037cb66b9c0d39d70f4cb482262ba1f523717a7"+e).split("").map(n=>n.charCodeAt(0));return v(t)}var h=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let n=8;n--;)t=t&1?3988292384^t>>>1:t>>>1;h[e]=t}function v(e){let t=-1;for(let n of e)t=t>>>8^h[t&255^n];return(t^-1)>>>0}async function u(e,t){let n=""+[+new Date,performance.now(),Math.random()],[i,g]=await new Promise(H=>{s.runtime.sendMessage([n,e,...t],R=>{H(R)})});if(i===b(n))return g}function _(){let e;return t=>e||(e=t().finally(()=>e=void 0),e)}var r,T=_();function w(){return T(async()=>(r||(r=await u("settings::get",[])),r))}function S(e){r&&(r={...r,...e},x(r))}function c(){return r}function a(e){return new Promise(t=>setTimeout(t,e))}var y=[];function C(e,t){e.timedout=!1,y.push(e);let n,i=setInterval(async()=>{await $(e,c())||(clearTimeout(n),clearInterval(i))},400);t&&(n=setTimeout(()=>clearInterval(i),t),e.timedout=!0)}async function $(e,t){if(e.timedout)return!1;let n=e.condition(t);if(n===e.running())return!1;if(!n&&e.running())return e.quit(),!1;if(n&&!e.running()){for(;!e.ready();)await a(200);return e.start(),!1}}function x(e){y.forEach(t=>$(t,e))}function P(){s.runtime.connect({name:"stream"}).onMessage.addListener(t=>{t.event==="settingsUpdate"&&S(t.settings)})}function l(e){if(document.readyState!=="loading")setTimeout(e,0);else{let t;t=()=>{removeEventListener("DOMContentLoaded",t),e()},addEventListener("DOMContentLoaded",t)}}var d,p=!1;function B(){return!(!m()||!document.querySelector("[role=button]"))}function M(){p=!0,d=new MutationObserver(()=>{document.querySelector("[role=button]").dispatchEvent(new MouseEvent("mouseup"))}),d.observe(document.querySelector('[aria-label="Human challenge"], [aria-label="Press & Hold"]'),{attributes:!0,attributeFilter:["aria-label"]}),D()}function q(){p=!1,d.disconnect()}function A(){return p}function m(){try{return!!(window.top!==window&&window.top.top===window.top&&[...window.top.document.querySelectorAll("script")].some(e=>e.innerText.includes("_pxAppId"))&&document.querySelector('[aria-label="Human challenge"], [aria-label="Press & Hold"]'))}catch{return!1}}async function D(){let e=c();e.perimeterx_solve_delay&&e.perimeterx_solve_delay_time>0&&await a(e.perimeterx_solve_delay_time),document.querySelector("[role=button]").dispatchEvent(new MouseEvent("mousedown"))}async function E(){let e=!1;for(let n=0;n<3;n++)if(await a(1e3),m()){e=!0;break}if(!e)return;P(),await w(),await u("tab::registerDetectedCaptcha",["perimeterx"]);let t=location.hostname;C({name:"perimeterx/auto-solve",condition:n=>n.enabled&&n.perimeterx_auto_solve&&!n.disabled_hosts.includes(t),ready:B,start:M,quit:q,running:A})}l(E);})();
